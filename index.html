<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Electric Music Generator</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: radial-gradient(ellipse at center, #020202 0%, #000000 100%);
      height: 100%;
      color: #aaddff;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    .container {
      background: rgba(0, 32, 64, 0.25);
      border: 2px solid #2bb3ff;
      border-radius: 20px;
      padding: 40px;
      text-align: center;
      box-shadow: 0 0 30px #0af;
    }

    h1 {
      font-size: 2em;
      margin-bottom: 20px;
    }

    select, button {
      font-size: 1.2em;
      margin: 10px;
      padding: 10px 20px;
      border-radius: 8px;
      border: none;
      background: #003f7f;
      color: #aaddff;
      box-shadow: 0 0 10px #00aaff;
      cursor: pointer;
    }

    button:hover, select:hover {
      background: #005fa3;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Electric Music Generator</h1>
    <select id="instrument">
      <option value="sine">Synth (Pure)</option>
      <option value="triangle">Triangle</option>
      <option value="square">Square</option>
      <option value="sawtooth">Sawtooth</option>
    </select>
    <br>
    <button onclick="startMusic()">Start</button>
    <button onclick="stopMusic()">Stop</button>
  </div>

  <script>
    let ctx = new (window.AudioContext || window.webkitAudioContext)();
    let playing = false;
    let nodes = [];
    let interval;

    function generateNote(freq, instrumentType) {
      const osc = ctx.createOscillator();
      const gain = ctx.createGain();
      const filter = ctx.createBiquadFilter();

      osc.type = instrumentType;
      osc.frequency.value = freq;

      // Smooth fade in/out
      gain.gain.setValueAtTime(0, ctx.currentTime);
      gain.gain.linearRampToValueAtTime(0.05, ctx.currentTime + 0.1);
      gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 3.5);

      // Soften high-pitched tones
      filter.type = "lowpass";
      filter.frequency.value = 1800; // Cut off high sharpness

      osc.connect(filter);
      filter.connect(gain);
      gain.connect(ctx.destination);

      osc.start();
      osc.stop(ctx.currentTime + 4);

      nodes.push(osc);

      osc.onended = () => {
        const i = nodes.indexOf(osc);
        if (i > -1) nodes.splice(i, 1);
      };
    }

    function startMusic() {
      if (playing) return;
      playing = true;

      const type = document.getElementById('instrument').value;

      interval = setInterval(() => {
        // Generate peaceful, smoothed random notes
        let baseFreq = 110; // Lower base frequency
        let freq = baseFreq + Math.pow(Math.random(), 2.5) * 800; // Exponential taper for smoother pitch
        generateNote(freq, type);
      }, 600 + Math.random() * 200); // Slow random intervals
    }

    function stopMusic() {
      playing = false;
      clearInterval(interval);
      nodes.forEach(n => n.stop());
      nodes = [];
    }
  </script>
</body>
</html>
