<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Electric Music Generator</title>
  <style>
    html, body {
      margin: 0;
      height: 100%;
      overflow: hidden;
      background: black;
      color: #00bfff;
      font-family: 'Segoe UI', sans-serif;
    }
    #ui {
      position: absolute;
      top: 20px;
      left: 20px;
      z-index: 10;
      background: rgba(0,0,0,0.6);
      padding: 20px;
      border: 2px solid #00bfff;
      border-radius: 10px;
      font-size: 1.5em;
    }
    label, select, button {
      display: block;
      margin: 10px 0;
    }
    canvas {
      position: absolute;
      top: 0;
      left: 0;
    }
  </style>
</head>
<body>
  <div id="ui">
    <label for="instrument">Instrument:</label>
    <select id="instrument">
      <option value="sine">Synth (Pure)</option>
      <option value="triangle">Triangle</option>
      <option value="square">Square</option>
      <option value="sawtooth">Sawtooth</option>
    </select>
    <button onclick="startMusic()">Start</button>
    <button onclick="stopMusic()">Stop</button>
  </div>
  <canvas id="bg"></canvas>

  <script>
    const canvas = document.getElementById('bg');
    const ctx = canvas.getContext('2d');
    let w = canvas.width = window.innerWidth;
    let h = canvas.height = window.innerHeight;

    window.addEventListener('resize', () => {
      w = canvas.width = window.innerWidth;
      h = canvas.height = window.innerHeight;
    });

    // Glowing floating dots with connection lines
    const dots = Array.from({ length: 100 }, () => ({
      x: Math.random() * w,
      y: Math.random() * h,
      vx: (Math.random() - 0.5) * 0.5,
      vy: (Math.random() - 0.5) * 0.5
    }));

    function drawBackground() {
      ctx.clearRect(0, 0, w, h);
      ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
      ctx.fillRect(0, 0, w, h);

      for (let i = 0; i < dots.length; i++) {
        const a = dots[i];
        a.x += a.vx;
        a.y += a.vy;

        if (a.x < 0 || a.x > w) a.vx *= -1;
        if (a.y < 0 || a.y > h) a.vy *= -1;

        ctx.beginPath();
        ctx.arc(a.x, a.y, 2, 0, Math.PI * 2);
        ctx.fillStyle = '#00bfff';
        ctx.fill();

        for (let j = i + 1; j < dots.length; j++) {
          const b = dots[j];
          const dx = a.x - b.x;
          const dy = a.y - b.y;
          const dist = Math.sqrt(dx * dx + dy * dy);
          if (dist < 120) {
            ctx.strokeStyle = `rgba(0, 191, 255, ${1 - dist / 120})`;
            ctx.beginPath();
            ctx.moveTo(a.x, a.y);
            ctx.lineTo(b.x, b.y);
            ctx.stroke();
          }
        }
      }
      requestAnimationFrame(drawBackground);
    }

    drawBackground();

    // Audio generation
    let context;
    let oscillators = [];
    let interval;

    function generateElectricSignal() {
      const instrument = document.getElementById('instrument').value;

      for (let i = 0; i < 3; i++) {
        const osc = context.createOscillator();
        const gain = context.createGain();

        osc.type = instrument;
        osc.frequency.setValueAtTime(
          100 + Math.random() * 200 + Math.sin(Date.now() * 0.001 + i) * 30,
          context.currentTime
        );

        gain.gain.setValueAtTime(0.05 + Math.random() * 0.03, context.currentTime);

        osc.connect(gain).connect(context.destination);
        osc.start();
        osc.stop(context.currentTime + 1.5 + Math.random());

        oscillators.push(osc);
      }
    }

    function startMusic() {
      if (!context || context.state === 'closed') {
        context = new (window.AudioContext || window.webkitAudioContext)();
      }

      if (context.state === 'suspended') {
        context.resume();
      }

      if (!interval) {
        interval = setInterval(generateElectricSignal, 1500);
      }
    }

    function stopMusic() {
      if (interval) {
        clearInterval(interval);
        interval = null;
      }
      if (oscillators.length > 0) {
        oscillators.forEach(o => o.stop());
        oscillators = [];
      }
    }
  </script>
</body>
</html>
